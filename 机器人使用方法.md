
# 📦 Telegram Solana Token 机器人使用文档

## ✨ 功能概述

本机器人自动监听某个 Telegram 群组中的交易播报消息（如 bought/sold 格式），提取相关交易数据、调用 Ave API 获取 Solana 上代币详细信息并自动生成：

- 📊 K线图（Kline 图）
- 💰 Token 当前价格、市值、持仓人数、成交额
- 📎 附带超链接：官网、推特、Telegram 社区
- 🧩 自动附带按钮：跳转龙枪 / OKX / 发推功能
- ✅ 自动将这些内容发布到指定目标群组

## 🧱 项目依赖

确保以下依赖已安装（使用 Python 3.9+）：

```bash
pip install python-telegram-bot==20.0b0 httpx matplotlib pandas
```

## 🛠 配置项说明

修改代码中以下变量来完成你自己的配置：

```python
BOT_TOKEN = "你的Telegram机器人Token"
AVE_API_KEY = "你的Ave API Key"
SOURCE_GROUP_ID = -100xxxxxxxxxx  # 监听消息的群组 ID
TARGET_GROUP_ID = -100yyyyyyyyyy  # 转发消息的群组 ID
```

## 📩 监听消息格式（自动识别）

本 bot 监听以下格式的消息并解析数据：

```
🟢 0x1234...abcd (bought 25,000 BOOP with 25 SOL ($3599))
📋 boopkpWqe68MSxLqBGogs8ZbUDN4GXaLhFwNP7mpP1i
```

支持关键词包括 `bought`, `sold`。必须附带 Solana 合约地址 `📋`.

## 🔍 功能说明

### ✅ 实时解析内容示例

解析后的消息将包含：

```
🟢 DX2H...akSy 🟢 购买 [BOOP](http://8.217.247.245/sou=BOOP)
💵 支付: 25 SOL ($3599)
📋 合约: boopkpWqe68MSxLqBGogs8ZbUDN4GXaLhFwNP7mpP1i

💰 当前价格：$0.0638
📈 当前市值：6387.83 万
📊 24h 成交额：6902.05 万
👥 持有人数：24010
🔗 搜索：[NewXAI](http://8.217.247.245/sou=NewXAI)
🌐 官网 ｜ [推特](http://8.217.247.245/BOOPLabs) ｜ 📢 Telegram
📤 发推：[点击跳转](http://8.217.247.245/ft=38Pgz...%20$BOOP%20https://x.com/BOOPLabs)
```

## 📈 K线图渲染逻辑

通过调用：

```
https://prod.ave-api.com/v2/klines/token/{contract}-solana?interval=1&size=100
```

获取代币 100 条分钟级别数据，使用 `matplotlib` 绘制 K线图并嵌入至机器人推送中。

## 🔘 消息附带按钮

每条转发消息附带以下按钮：

| 按钮名称      | 跳转目标                                               |
|---------------|--------------------------------------------------------|
| 🔗 龙枪跳转    | 机器人 @DraGun69_Bot 的 start 参数跳转                  |
| 🆗 跳转OKX     | 指向 http://8.217.247.245:90/合约地址                    |
| 📤 发推       | 构造跳转 twitter://post?message=xxx 的格式，预设文案    |

## 🌐 Deeplink 路由设计（服务端）

支持以下类型跳转：

| URL 示例                                      | 跳转目标描述                    |
|-----------------------------------------------|----------------------------------|
| `/sou=xxx`                                    | Twitter 搜索                    |
| `/sq=1918010873790251485`                     | Twitter 社群                    |
| `/xrzeth`                                     | Twitter 用户主页                |
| `/1919371412000694531`                        | 指定推文                        |
| `/ft=合约地址 $代币名 推特链接`                | 自动填入发推预设文案             |

## 📌 部署方式

1. 直接在代码中填入你的配置
2. 运行主程序：

```bash
python py.py
```

## 📎 注意事项

- 如果 Ave API 失效或 403 错误，请检查 header 中 `X-API-KEY` 配置

- Telegram 群组需要将 Bot 设置为管理员

- 其他问题请直接把代码托到Chat GPT或者GROK中

- 以上代码全由AI编写，请合理使用
